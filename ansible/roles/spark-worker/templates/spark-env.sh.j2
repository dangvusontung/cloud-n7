#!/usr/bin/env bash

# Spark Environment Configuration for Worker
export JAVA_HOME=/usr/lib/jvm/java-{{ java_version }}-openjdk-amd64
export SPARK_HOME={{ spark_home }}
export SPARK_MASTER_HOST={{ spark_master_host }}
export SPARK_MASTER_PORT=7077
export SPARK_WORKER_CORES={{ ansible_processor_vcpus }}
export SPARK_WORKER_MEMORY={{ (ansible_memtotal_mb * 0.8) | int }}m
export SPARK_WORKER_PORT=7078
export SPARK_WORKER_WEBUI_PORT=8081
export SPARK_DAEMON_MEMORY=1g
export SPARK_LOG_DIR={{ spark_home }}/logs
export SPARK_PID_DIR=/var/run/spark